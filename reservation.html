<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reserve Your EV Battery | VerdaVolt</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Bellota+Text&display=swap" rel="stylesheet"/>
  <meta property="og:type" content="website" />
  <meta charset="utf-8" />
  <link rel="icon" href="">
  <meta name="viewport" content="width=device-width" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>VerdaVolt</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" 0 integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous" />
  <link href="style.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <script src="https://unpkg.com/jparticles/browser/jparticles.base.js"></script>
  <script src="https://unpkg.com/jparticles/browser/particle.js"></script>
  <link href="tags.css" rel="stylesheet" type="text/css" />
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;800&display=swap" rel="stylesheet"/>
  
  <style>
    body {
      font-family: 'Bellota Text', sans-serif;
      background: linear-gradient(145deg, #02a726, #0b0e14);
      color: #fafafa;
      padding-top: 150px;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .form-container {
      background-color: rgba(0, 0, 0, 0.85);
      padding: 2.5rem;
      border-radius: 20px;
      box-shadow: 0 0 24px rgba(0, 0, 0, 0.4);
      width: 100%;
      max-width: 700px;
      animation: fadeIn 0.6s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .form-title {
      margin-bottom: 2rem;
      text-align: center;
      font-weight: bold;
      color: #aeea00;
    }

    label {
      color: #aeea00;
    }

    .btn-green {
      background-color: #02a726;
      border: none;
      color: white;
      font-weight: bold;
      transition: all 0.3s;
    }

    .btn-green:hover {
      background-color: #04d135;
      transform: scale(1.03);
    }

    #responseMessage {
      animation: slideDown 0.5s ease-in-out;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg">
    <div class="container-lg">
      <a class="navbar-brand" href="index.html"><img src="assets/logo.png" alt="" /></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link " aria-current="page" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="howtojoin.html">Why us?</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="about us.html">Meet us</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Timetable.html">Events</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="final ignited project.html">Marketplace</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="reservation.html">Reservations</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="getInvolvedDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Get Involved
            </a>
            <ul class="dropdown-menu" aria-labelledby="getInvolvedDropdown">
              <li><a class="dropdown-item" href="game hub.html">Game Hub</a></li>
              <li><a class="dropdown-item" href="volun.html">Volunteering</a></li>
              <li><a class="dropdown-item" href="donations.html">Donations</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container px-3" style="margin-left: 17rem;">
    <div class="form-container" style="margin-top: 20rem;">
      <h2 class="form-title">Reserve Your EV Battery</h2>
      <form id="reservationForm">
        <div class="mb-3">
          <label for="name" class="form-label">Full Name</label>
          <input type="text" class="form-control" id="name" placeholder="Jane Doe" required />
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input type="email" class="form-control" id="email" placeholder="you@example.com" required />
        </div>
        <div class="mb-3">
          <label for="location" class="form-label">Your Location</label>
          <div class="input-group">
            <input type="text" class="form-control" id="location" placeholder="Your current GPS location" readonly required />
            <button class="btn btn-outline-light" type="button" onclick="getLocation()">Use My Location</button>
          </div>
        </div>
        <div class="mb-3">
          <label for="batteryType" class="form-label">Battery Type</label>
          <select class="form-select" id="batteryType" required>
            <option value="">-- Select Type --</option>
            <option value="lithium-ion">Lithium-Ion</option>
            <option value="solid-state">Solid-State</option>
            <option value="nickel-metal-hydride">Nickel-Metal Hydride</option>
            <option value="lead-acid">Lead Acid</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="capacity" class="form-label">Capacity (kWh)</label>
          <input type="number" class="form-control" id="capacity" placeholder="e.g., 60" required />
        </div>
        <div class="mb-3">
          <label for="notes" class="form-label">Additional Notes (optional)</label>
          <textarea class="form-control" id="notes" rows="3" placeholder="Any preferences or requests..."></textarea>
        </div>
        <div class="mb-3">
          <label for="price" class="form-label">Estimated Price (EGP)</label>
          <input type="text" class="form-control" id="price" disabled />
        </div>
        <div class="mb-3">
          <label for="eta" class="form-label">Estimated Delivery Time</label>
          <input type="text" class="form-control" id="eta" disabled />
        </div>
        <button type="submit" class="btn btn-green w-100">Submit Reservation</button>
      </form>
      <div class="mt-3" id="responseMessage" style="display: none;"></div>
    </div>
  </div>

  <script>
    const capacityInput = document.getElementById("capacity");
    const priceInput = document.getElementById("price");
    const etaInput = document.getElementById("eta");

    let coords = null;

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (position) => {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            coords = { lat, lon };
            document.getElementById("location").value = `${lat.toFixed(5)}, ${lon.toFixed(5)}`;
            etaInput.value = estimateETA(lat, lon);
          },
          () => {
            alert("Unable to retrieve location. Please enable location services.");
          }
        );
      } else {
        alert("Geolocation is not supported by your browser.");
      }
    }

    function estimateETA(lat, lon) {
      const warehouse = { lat: 30.0444, lng: 31.2357 };
      const R = 6371;
      const dLat = (lat - warehouse.lat) * Math.PI / 180;
      const dLon = (lon - warehouse.lng) * Math.PI / 180;
      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat * Math.PI / 180) * Math.cos(warehouse.lat * Math.PI / 180) *
                Math.sin(dLon/2) * Math.sin(dLon/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
      const distance = R * c;
      if (distance < 100) return "1 hour";
      else if (distance < 300) return "2-3 hour";
      else return "3-5 hour";
    }

    capacityInput.addEventListener("input", () => {
      const cap = parseFloat(capacityInput.value);
      if (!isNaN(cap)) {
        const price = (cap * 6).toFixed(2);
        priceInput.value = `EGP ${price}`;
      } else {
        priceInput.value = "";
      }
    });

    document.getElementById("reservationForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const name = document.getElementById("name").value;
      const capacity = parseFloat(document.getElementById("capacity").value);
      const price = (capacity * 6).toFixed(2);
      const eta = etaInput.value || "N/A";

      document.getElementById("responseMessage").style.display = "block";
      document.getElementById("responseMessage").innerHTML = `
        <div class="alert alert-success">
          <p>Thank you, <strong>${name}</strong>! Your battery reservation has been received.</p>
          <p><strong>Total Price:</strong> EGP ${price}</p>
          <p><strong>Estimated delivery:</strong> ${eta}</p>
          <p>We'll contact you shortly with the next steps.</p>
        </div>
      `;

      this.reset();
      priceInput.value = "";
      etaInput.value = "";
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>
</body>
</html>
